var I=Object.defineProperty;var R=(i,t,s)=>t in i?I(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var a=(i,t,s)=>R(i,typeof t!="symbol"?t+"":t,s);class h{constructor(t,s){a(this,"x");a(this,"y");this.x=t,this.y=s}subtract(t){return new h(this.x-t.x,this.y-t.y)}distanceTo(t){return t.subtract(this).getLength()}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}}const y=(i,t,s)=>i+(t-i)*s,O=(i,t,s)=>new h(y(i.x,t.x,s),y(i.y,t.y,s));class P{constructor({startPosition:t,targetPosition:s=t,startRotation:o=0,targetRotation:e=o,startOpacity:n=1,targetOpacity:r=n,ctx:l,label:c,font:u="24px Inter",color:d=getComputedStyle(l.canvas).getPropertyValue("--fg"),duration:p=1e3,delay:v=0}){a(this,"ctx");a(this,"label");a(this,"font");a(this,"color");a(this,"position");a(this,"startPosition");a(this,"targetPosition");a(this,"rotation");a(this,"startRotation");a(this,"targetRotation");a(this,"opacity");a(this,"startOpacity");a(this,"targetOpacity");a(this,"duration");a(this,"animationStart");this.ctx=l,this.label=c,this.font=u,this.color=d,this.position=t,this.startPosition=t,this.targetPosition=s,this.rotation=o,this.startRotation=o,this.targetRotation=e,this.opacity=n,this.startOpacity=n,this.targetOpacity=r,this.duration=p,this.animationStart=Date.now()+v}update(){const t=Date.now()-this.animationStart,s=t/this.duration;return t<0?!1:t>=this.duration?(this.position=this.targetPosition,!0):(this.position=O(this.startPosition,this.targetPosition,s),this.opacity=y(this.startOpacity,this.targetOpacity,s),this.rotation=y(this.startRotation,this.targetRotation,s),!1)}draw(t){t.save(),t.textAlign="center",t.textBaseline="middle",t.globalAlpha=this.opacity,t.fillStyle=this.color,t.font=this.font,t.translate(this.position.x,this.position.y),t.rotate(this.rotation),t.fillText(this.label,0,0),t.restore()}tick(){const t=this.update();return this.draw(this.ctx),t}}class L{constructor({startPosition:t,targetPosition:s,ctx:o,color:e=getComputedStyle(o.canvas).getPropertyValue("--fg"),duration:n=1e3,delay:r=0}){a(this,"ctx");a(this,"color");a(this,"position");a(this,"startPosition");a(this,"targetPosition");a(this,"duration");a(this,"animationStart");this.ctx=o,this.color=e,this.position=t,this.startPosition=t,this.targetPosition=s,this.duration=n,this.animationStart=Date.now()+r}update(){const t=Date.now()-this.animationStart,s=t/this.duration;return t<0?!1:t>=this.duration?(this.position=this.targetPosition,!0):(this.position=O(this.startPosition,this.targetPosition,s),!1)}draw(t){t.strokeStyle=this.color,t.beginPath(),t.moveTo(this.startPosition.x,this.startPosition.y),t.lineTo(this.position.x,this.position.y),t.stroke()}tick(){const t=this.update();return this.draw(this.ctx),t}}const m=(i,t,s=[])=>new Promise(o=>{const e=()=>{i.clearRect(0,0,i.canvas.width,i.canvas.height),s.forEach(r=>r.draw(i)),t.map(r=>r.tick()).every(Boolean)?o():requestAnimationFrame(e)};e()}),k=(...i)=>{const t=[];for(let s=0;s<i[0].length;s++){t[s]=[];for(let o=0;o<i.length;o++)t[s][o]=i[o][s]}return t},D=i=>i.reduce((t,s)=>t+s,0),T=`3   4
4   3
2   5
1   3
3   9
3   3`,g=200,f=100,b=200,q=24,C=async i=>{const t=T.split(`
`).map(w=>w.split("   ").map(Number)),[s,o]=k(...t),e=[...s].sort((w,S)=>w-S),n=[...o].sort((w,S)=>w-S),r=A(i,s,-b/2),l=A(i,o,b/2),c=[...r,...l];await m(i,c);const u=M(i,s.length);await m(i,u,c);const[d,p]=V(i,e,n);await m(i,d,[...u,...c]);const v=z(i,p);await m(i,v,[...d,...u,...c])},A=(i,t,s)=>{const o=t.map((n,r)=>({value:n,id:r})),e=[...o].sort((n,r)=>n.value-r.value);return o.map((n,r)=>{const l=e.findIndex(p=>p.id===n.id),c=i.canvas.width/2+s,u=new h(c,g+r*f),d=new h(c,g+l*f);return new P({ctx:i,startPosition:u,targetPosition:d,delay:1e3,label:n.value.toString(),font:`${q}px Inter`})})},M=(i,t)=>{const s=[];for(let e=0;e<t;e++){const n=g+f*e;s.push(new L({ctx:i,startPosition:new h(i.canvas.width/2-b/2+20,n),targetPosition:new h(i.canvas.width/2-20,n),duration:500})),s.push(new L({ctx:i,startPosition:new h(i.canvas.width/2+b/2-20,n),targetPosition:new h(i.canvas.width/2+20,n),duration:500}))}return s},V=(i,t,s)=>{const o=[],e=[];for(let n=0;n<t.length;n++){const r=Math.abs(t[n]-s[n]);e.push(r);const l=new h(i.canvas.width/2,g+n*f);o.push(new P({ctx:i,startPosition:l,label:r.toString(),startOpacity:0,targetOpacity:1,duration:500}))}return[o,e]},z=(i,t)=>{const s=D(t),o=new P({ctx:i,startPosition:new h(i.canvas.width/2,g-30),startRotation:Math.PI/2,startOpacity:0,targetOpacity:1,label:"="}),e=new P({ctx:i,startPosition:new h(i.canvas.width/2,g-60),startOpacity:0,targetOpacity:1,label:s.toString()});return console.log("Part 1:",s),[o,e]};export{C as part1};
