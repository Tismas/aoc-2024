import{s as g}from"./showInConstructionMessage-DAWy1VTI.js";import{V as o}from"./AnimatedLabel-CVP5itg0.js";import"./index-CWLejmAq.js";const u={7:new o(0,0),8:new o(1,0),9:new o(2,0),4:new o(0,1),5:new o(1,1),6:new o(2,1),1:new o(0,2),2:new o(1,2),3:new o(2,2),0:new o(1,3),A:new o(2,3)},y={"^":new o(1,0),A:new o(2,0),"<":new o(0,1),v:new o(1,1),">":new o(2,1)},D=(i,e)=>{const n={};A(n),a(n);let t=0;for(const s of e.split(`
`))t+=p(s,n,3)*parseInt(s);g(i,t)},p=(i,e,n,t={})=>{if(n===0)return i.length;const s=`${n}-${i}`;if(t[s])return t[s];let c=0;for(;i;){const r=i.substring(0,i.indexOf("A")+1);i=i.substring(i.indexOf("A")+1).trim();const x=d(r,e),h=Math.min(...x.map(f=>p(f,e,n-1,t)));c+=h}return t[s]=c,c},d=(i,e,n=0,t="A",s="",c=[])=>{if(n===i.length)c.push(s);else for(const r of e[t][i[n]])d(i,e,n+1,i[n],s+r+"A",c);return c},A=i=>{var e;for(const n of Object.keys(u)){i[n]||(i[n]={});for(const t of Object.keys(u))(e=i[n])[t]||(e[t]=new Set),i[n][t]=i[n][t].union(j(u[n],u[t]))}return i},a=i=>{var e;for(const n of Object.keys(y)){i[n]||(i[n]={});for(const t of Object.keys(y))(e=i[n])[t]||(e[t]=new Set),i[n][t]=i[n][t].union(m(y[n],y[t]))}return i},j=(i,e)=>{let n=[],t=[];const s=i.copy();let c=s.copy();if(s.y===3&&e.x===0)for(;s.y!==e.y;)s.y--,c.y--,n.push("^"),t.push("^");else if(s.x===0&&e.y===3)for(;s.x!==e.x;)s.x++,c.x++,n.push(">"),t.push(">");for(;c.x!==e.x;){const r=Math.sign(e.x-c.x);c.x+=r,t.push(r<0?"<":">")}for(;c.y!==e.y;){const r=Math.sign(e.y-c.y);c.y+=r,t.push(r<0?"^":"v")}for(;s.y!==e.y;){const r=Math.sign(e.y-s.y);s.y+=r,n.push(r<0?"^":"v")}for(;s.x!==e.x;){const r=Math.sign(e.x-s.x);s.x+=r,n.push(r<0?"<":">")}return new Set([n.join(""),t.join("")])},m=(i,e)=>{let n=i.copy(),t=[],s=n.copy(),c=[];if(n.y===0&&e.x===0)for(;n.y!==e.y;)n.y++,s.y++,t.push("v"),c.push("v");else if(n.x===0&&e.y===0)for(;n.x!==e.x;)n.x++,s.x++,t.push(">"),c.push(">");for(;s.x!==e.x;){const r=Math.sign(e.x-s.x);s.x+=r,c.push(r<0?"<":">")}for(;s.y!==e.y;){const r=Math.sign(e.y-s.y);s.y+=r,c.push(r<0?"^":"v")}for(;n.y!==e.y;){const r=Math.sign(e.y-n.y);n.y+=r,t.push(r<0?"^":"v")}for(;n.x!==e.x;){const r=Math.sign(e.x-n.x);n.x+=r,t.push(r<0?"<":">")}return new Set([t.join(""),c.join("")])},w={7:new o(0,0),8:new o(1,0),9:new o(2,0),4:new o(0,1),5:new o(1,1),6:new o(2,1),1:new o(0,2),2:new o(1,2),3:new o(2,2),0:new o(1,3),A:new o(2,3)},l={"^":new o(1,0),A:new o(2,0),"<":new o(0,1),v:new o(1,1),">":new o(2,1)},N=(i,e)=>{const n={};v(n),K(n);let t=0;for(const s of e.split(`
`))t+=b(s,n,26)*parseInt(s);g(i,t)},b=(i,e,n,t={})=>{if(n===0)return i.length;const s=`${n}-${i}`;if(t[s])return t[s];let c=0;for(;i;){const r=i.substring(0,i.indexOf("A")+1);i=i.substring(i.indexOf("A")+1).trim();const x=M(r,e),h=Math.min(...x.map(f=>b(f,e,n-1,t)));c+=h}return t[s]=c,c},M=(i,e,n=0,t="A",s="",c=[])=>{if(n===i.length)c.push(s);else for(const r of e[t][i[n]])M(i,e,n+1,i[n],s+r+"A",c);return c},v=i=>{var e;for(const n of Object.keys(w)){i[n]||(i[n]={});for(const t of Object.keys(w))(e=i[n])[t]||(e[t]=new Set),i[n][t]=i[n][t].union(P(w[n],w[t]))}return i},K=i=>{var e;for(const n of Object.keys(l)){i[n]||(i[n]={});for(const t of Object.keys(l))(e=i[n])[t]||(e[t]=new Set),i[n][t]=i[n][t].union(O(l[n],l[t]))}return i},P=(i,e)=>{let n=[],t=[];const s=i.copy();let c=s.copy();if(s.y===3&&e.x===0)for(;s.y!==e.y;)s.y--,c.y--,n.push("^"),t.push("^");else if(s.x===0&&e.y===3)for(;s.x!==e.x;)s.x++,c.x++,n.push(">"),t.push(">");for(;c.x!==e.x;){const r=Math.sign(e.x-c.x);c.x+=r,t.push(r<0?"<":">")}for(;c.y!==e.y;){const r=Math.sign(e.y-c.y);c.y+=r,t.push(r<0?"^":"v")}for(;s.y!==e.y;){const r=Math.sign(e.y-s.y);s.y+=r,n.push(r<0?"^":"v")}for(;s.x!==e.x;){const r=Math.sign(e.x-s.x);s.x+=r,n.push(r<0?"<":">")}return new Set([n.join(""),t.join("")])},O=(i,e)=>{let n=i.copy(),t=[],s=n.copy(),c=[];if(n.y===0&&e.x===0)for(;n.y!==e.y;)n.y++,s.y++,t.push("v"),c.push("v");else if(n.x===0&&e.y===0)for(;n.x!==e.x;)n.x++,s.x++,t.push(">"),c.push(">");for(;s.x!==e.x;){const r=Math.sign(e.x-s.x);s.x+=r,c.push(r<0?"<":">")}for(;s.y!==e.y;){const r=Math.sign(e.y-s.y);s.y+=r,c.push(r<0?"^":"v")}for(;n.y!==e.y;){const r=Math.sign(e.y-n.y);n.y+=r,t.push(r<0?"^":"v")}for(;n.x!==e.x;){const r=Math.sign(e.x-n.x);n.x+=r,t.push(r<0?"<":">")}return new Set([t.join(""),c.join("")])},q=`029A
980A
179A
456A
379A`;export{q as input,D as part1,N as part2};
