import{s as a}from"./showInConstructionMessage-Di-X0iBZ.js";import"./AnimatedLabel-CjwdShHn.js";import"./index-Dy0Zg4Ts.js";const I=(e,t)=>{const r=[];let n=!1,l=0;for(const i of t.split("")){const s=Number(i);n?r.push(...new Array(s).fill(".")):(r.push(...new Array(s).fill(l)),l++),n=!n}for(;r.includes(".");){const i=r.pop();i!=="."&&(r[r.indexOf(".")]=i)}const o=r.reduce((i,s,p)=>i+s*p,0);a(e,o)},y=(e,t)=>{const r=t.split("").map(Number);let n=null,l=null,o=0;for(let c=0;c<r.length;c+=2){const f={fileId:o,size:r[c],freeSpaceAfter:r[c+1]||0,next:null,prev:null};!n||!l?(n=f,l=f):(f.prev=l,l.next=f,l=f),o++}if(!l||!n)throw new Error("wtf?");u(n),x(n,l),u(n);let i=0,s=n,p=0;for(;s;){const c=s.fileId*p,f=s.fileId*(p+s.size-1);i+=s.size*((c+f)/2),p+=s.size+s.freeSpaceAfter,s=s.next}a(e,i)},x=(e,t)=>{for(;e.freeSpaceAfter===0;){if(!e.next)return;e=e.next}let r=e;for(;r!==t;){const n=t.prev;if(A(r,t)){if(!n)return;if(e!==n)return x(e,n)}if(!t.prev)return;t=t.prev}},A=(e,t)=>{for(;e!==t;){if(e.freeSpaceAfter>=t.size)return w(t),m(t,e),!0;if(!e.next)return;e=e.next}return!1},w=e=>{e.prev&&(e.prev.freeSpaceAfter+=e.size+e.freeSpaceAfter,e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.next=null,e.prev=null},m=(e,t)=>{e.freeSpaceAfter=t.freeSpaceAfter-e.size,t.freeSpaceAfter=0,e.next=t.next,e.prev=t,t.next&&(t.next.prev=e),t.next=e},u=e=>{const t=[];let r=e;for(;r;)t.push(...new Array(r.size).fill(r.fileId)),t.push(...new Array(r.freeSpaceAfter).fill(".")),r=r.next;console.log(t.join(""))},N="8395133";export{N as input,I as part1,y as part2};
